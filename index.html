<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Clicker</title>
    <style>
        /* ... (предыдущие стили остаются без изменений) ... */

        .prestige-section {
            background: #3a3a3a;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            text-align: center;
        }

        .boost-timer {
            color: #FFD700;
            font-size: 14px;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="score-container">
            Очков: <span id="score">0</span>
            <div>Клик-сила: <span id="clickPower">1</span></div>
            <div>Автокликеры: <span id="autoClickers">0</span></div>
        </div>
        
        <button id="clickButton">КЛИКАЙ!</button>

        <div class="shop">
            <h2>Улучшения</h2>
            <div id="upgrades"></div>
        </div>

        <div class="prestige-section">
            <h3>Множители</h3>
            <div id="boosts"></div>
        </div>
    </div>

    <script>
        let score = 0;
        let baseClickPower = 1;
        let autoClickers = 0;
        let multipliers = {
            critical: 1,
            timeBoost: 1,
            goldenClick: 1
        };

        const upgrades = [
            {
                name: 'Усиленный клик',
                price: 50,
                power: 1,
                type: 'click',
                owned: 0,
                max: 20
            },
            {
                name: 'Автокликер',
                price: 100,
                power: 1,
                type: 'auto',
                owned: 0,
                max: 50
            },
            {
                name: 'Критический удар (10%)',
                price: 500,
                power: 0.1,
                type: 'critical',
                owned: 0,
                max: 5
            },
            {
                name: 'Золотой клик',
                price: 1000,
                power: 5,
                type: 'golden',
                owned: 0,
                max: 1
            },
            {
                name: 'Ускорение времени',
                price: 2000,
                power: 2,
                type: 'boost',
                duration: 30,
                owned: 0,
                max: 3
            },
            {
                name: 'Множитель x2',
                price: 5000,
                power: 2,
                type: 'multiplier',
                owned: 0,
                max: 1
            },
            {
                name: 'Цепная реакция',
                price: 10000,
                power: 0.5,
                type: 'chain',
                owned: 0,
                max: 5
            }
        ];

        let activeBoosts = {};
        
        // ... (функции loadGame и saveGame остаются без изменений) ...

        function updateUI() {
            document.getElementById('score').textContent = Math.floor(score);
            document.getElementById('clickPower').textContent = calculateTotalClickPower();
            document.getElementById('autoClickers').textContent = autoClickers;
            
            document.getElementById('upgrades').innerHTML = upgrades.map((upgrade, index) => `
                <div class="upgrade">
                    <div>
                        <h3>${upgrade.name}</h3>
                        <p>${getUpgradeDescription(upgrade)}</p>
                        <p>Цена: ${Math.floor(upgrade.price)}</p>
                        <p>Куплено: ${upgrade.owned}/${upgrade.max}</p>
                        ${activeBoosts[upgrade.name] ? 
                            `<div class="boost-timer">Осталось: ${activeBoosts[upgrade.name].duration}s</div>` : ''}
                    </div>
                    <button 
                        onclick="buyUpgrade(${index})" 
                        ${score < upgrade.price || upgrade.owned >= upgrade.max ? 'disabled' : ''}>
                        Купить
                    </button>
                </div>
            `).join('');
        }

        function getUpgradeDescription(upgrade) {
            switch(upgrade.type) {
                case 'critical': return `Шанс: +${upgrade.power * 100}%`;
                case 'golden': return `Множитель: x${upgrade.power}`;
                case 'boost': return `Длительность: ${upgrade.duration}s`;
                default: return `Сила: +${upgrade.power}`;
            }
        }

        function calculateTotalClickPower() {
            let total = baseClickPower;
            
            upgrades.forEach(upgrade => {
                if(upgrade.type === 'click') total += upgrade.power * upgrade.owned;
                if(upgrade.type === 'critical') total *= 1 + (upgrade.power * upgrade.owned);
                if(upgrade.type === 'multiplier') total *= upgrade.power ** upgrade.owned;
            });

            return Math.floor(total * multipliers.timeBoost * multipliers.goldenClick);
        }

        function buyUpgrade(index) {
            const upgrade = upgrades[index];
            if(score >= upgrade.price && upgrade.owned < upgrade.max) {
                score -= upgrade.price;
                upgrade.owned++;
                
                switch(upgrade.type) {
                    case 'auto':
                        autoClickers += upgrade.power;
                        break;
                    case 'boost':
                        activateBoost(upgrade);
                        break;
                    case 'golden':
                        setupGoldenClick();
                        break;
                }
                
                upgrade.price = Math.floor(upgrade.price * 1.5);
                saveGame();
                updateUI();
            }
        }

        function activateBoost(upgrade) {
            multipliers.timeBoost = upgrade.power;
            activeBoosts[upgrade.name] = {
                duration: upgrade.duration
            };

            const interval = setInterval(() => {
                activeBoosts[upgrade.name].duration--;
                if(activeBoosts[upgrade.name].duration <= 0) {
                    multipliers.timeBoost = 1;
                    delete activeBoosts[upgrade.name];
                    clearInterval(interval);
                }
                updateUI();
            }, 1000);
        }

        function setupGoldenClick() {
            const goldenClicker = document.createElement('div');
            goldenClicker.style.position = 'fixed';
            goldenClicker.style.left = `${Math.random() * 80}%`;
            goldenClicker.style.top = `${Math.random() * 80}%`;
            goldenClicker.style.width = '50px';
            goldenClicker.style.height = '50px';
            goldenClicker.style.background = 'gold';
            goldenClicker.style.borderRadius = '50%';
            goldenClicker.style.cursor = 'pointer';
            goldenClicker.onclick = () => {
                score += 100 * multipliers.goldenClick;
                document.body.removeChild(goldenClicker);
                multipliers.goldenClick = 1;
                updateUI();
            };
            document.body.appendChild(goldenClicker);
            
            setTimeout(() => {
                if(document.body.contains(goldenClicker)) {
                    document.body.removeChild(goldenClicker);
                    multipliers.goldenClick = 1;
                }
            }, 5000);
        }

        // ... (остальной код остается без изменений) ...

        // Модифицированная функция клика
        document.getElementById('clickButton').addEventListener('click', () => {
            let clickValue = calculateTotalClickPower();
            
            // Проверка на критический удар
            const criticalChance = upgrades
                .filter(u => u.type === 'critical')
                .reduce((sum, u) => sum + u.power * u.owned, 0);
            
            if(Math.random() < criticalChance) {
                clickValue *= 2;
            }

            // Цепная реакция
            const chainMultiplier = 1 + upgrades
                .filter(u => u.type === 'chain')
                .reduce((sum, u) => sum + u.power * u.owned, 0);
            
            score += clickValue * chainMultiplier;
            updateUI();
            saveGame();
        });

        // ... (остальной код инициализации) ...
    </script>
</body>
</html>