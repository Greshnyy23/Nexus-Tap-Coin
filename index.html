<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexus Tap 2.0</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto+Mono:wght@300;500&display=swap" rel="stylesheet">
    <style>
        /* –í–∞—à CSS –æ—Å—Ç–∞—ë—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π */
    </style>
</head>
<body>
    <canvas class="particles" id="particles"></canvas>
    <div class="cyber-border floating">
        <h1>NEXUS TAP v2.0</h1>
        <div class="stats-grid">
            <div class="stat-item">
                <h3>üî∑ –≠–Ω–µ—Ä–≥–∏—è</h3>
                <p id="coins">0</p>
            </div>
            <div class="stat-item">
                <h3>‚öõÔ∏è –ú–æ—â–Ω–æ—Å—Ç—å</h3>
                <p id="core-power">1</p>
            </div>
            <div class="stat-item">
                <h3>üß† –ê–≤—Ç–æ-–ö–ª–∏–∫–µ—Ä—ã</h3>
                <p id="neuro-clicks">0</p>
            </div>
        </div>
        <h2>–£—Ä–æ–≤–µ–Ω—å: <span id="current-level">1</span></h2>
        <button class="main-button" onclick="harvestEnergy()">
            –ê–ö–¢–ò–í–ò–†–û–í–ê–¢–¨ –Ø–î–†–û
        </button>
        <h2>–£–ª—É—á—à–µ–Ω–∏—è</h2>
        <div class="upgrades-grid">
            <div class="upgrade-card" onclick="buyUpgrade('core')">
                <h3>‚öõÔ∏è –°–∏–Ω–≥—É–ª—è—Ä–Ω–æ–µ –Ø–¥—Ä–æ</h3>
                <p>–¶–µ–Ω–∞: <span class="cost">100</span>üî∑</p>
                <p>+1 –∫ –º–æ—â–Ω–æ—Å—Ç–∏</p>
            </div>
            <div class="upgrade-card" onclick="buyUpgrade('neuro')">
                <h3>üß† –ù–µ–π—Ä–æ—Å–µ—Ç—å</h3>
                <p>–¶–µ–Ω–∞: <span class="cost">200</span>üî∑</p>
                <p>+1 –∞–≤—Ç–æ-–∫–ª–∏–∫–µ—Ä</p>
            </div>
        </div>
        <h2>–ü—Ä–æ–≥—Ä–µ—Å—Å</h2>
        <div class="progress-container">
            <div class="progress-bar" id="matrix-progress"></div>
            <div class="glow"></div>
        </div>
    </div>
    <div id="levelModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>–ù–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å!</h2>
            <p>–ù–∞–≥—Ä–∞–¥–∞: <span id="reward-amount">500</span> üî∑</p>
        </div>
    </div>
    <div id="notification" class="notification"></div>
    <script>
        const canvas = document.getElementById('particles');
        const ctx = canvas.getContext('2d');
        let energy = 0;
        let corePower = 1;
        let neuroClicks = 0;
        let level = 1;
        let energyThreshold = 1000;

        const loadGame = () => {
            const savedData = JSON.parse(localStorage.getItem('nexusTapData'));
            if (savedData) {
                energy = savedData.energy || 0;
                corePower = savedData.corePower || 1;
                neuroClicks = savedData.neuroClicks || 0;
                level = savedData.level || 1;
                energyThreshold = savedData.energyThreshold || 1000;
            }
            updateUI();
        };

        const updateUI = () => {
            document.getElementById('coins').innerText = energy;
            document.getElementById('core-power').innerText = corePower;
            document.getElementById('neuro-clicks').innerText = neuroClicks;
            document.getElementById('current-level').innerText = level;
            updateProgress();
        };

        const saveGame = () => {
            const gameData = {
                energy,
                corePower,
                neuroClicks,
                level,
                energyThreshold
            };
            localStorage.setItem('nexusTapData', JSON.stringify(gameData));
        };

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }

        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        class Particle {
            constructor() {
                this.reset();
            }

            reset() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 2 + 1;
                this.speed = Math.random() * 0.5 + 0.1;
                this.angle = Math.random() * Math.PI * 2;
            }

            update() {
                this.x += Math.cos(this.angle) * this.speed;
                this.y += Math.sin(this.angle) * this.speed;
                if (this.x < 0 || this.x > canvas.width || this.y < 0 || this.y > canvas.height) {
                    this.reset();
                }
            }

            draw() {
                ctx.fillStyle = `rgba(0, 243, 255, ${this.size / 2})`;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        const particles = Array(100).fill().map(() => new Particle());

        function animate() {
            ctx.fillStyle = 'rgba(10, 10, 30, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            particles.forEach(particle => {
                particle.update();
                particle.draw();
            });
            requestAnimationFrame(animate);
        }

        animate();

        function harvestEnergy() {
            energy += corePower;
            updateUI();
            saveGame();
            checkProgress();
        }

        function buyUpgrade(type) {
            let cost;
            if (type === 'core') {
                cost = 100;
                if (energy >= cost) {
                    energy -= cost;
                    corePower += 1;
                    showNotification("–°–∏–Ω–≥—É–ª—è—Ä–Ω–æ–µ —è–¥—Ä–æ —É–ª—É—á—à–µ–Ω–æ!");
                } else {
                    showNotification("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏!");
                }
            } else if (type === 'neuro') {
                cost = 200;
                if (energy >= cost) {
                    energy -= cost;
                    neuroClicks += 1;
                    showNotification("–ù–µ–π—Ä–æ—Å–µ—Ç—å —É–ª—É—á—à–µ–Ω–∞!");
                } else {
                    showNotification("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏!");
                }
            }
            updateUI();
            saveGame();
        }

        function updateProgress() {
            const progressBar = document.getElementById('matrix-progress');
            const progressWidth = Math.min(100, (energy / energyThreshold) * 100);
            progressBar.style.width = `${progressWidth}%`;
        }

        function checkProgress() {
            if (energy >= energyThreshold) {
                const reward = level * 500; // –ù–∞–≥—Ä–∞–¥–∞ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ —É—Ä–æ–≤–Ω—é
                level += 1; // –ü–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è
                energyThreshold = Math.floor(energyThreshold * 1.5); // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–æ—Ä–æ–≥–∞ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
                energy += reward; // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥—ã –∫ –±–∞–ª–∞–Ω—Å—É
                document.getElementById('reward-amount').innerText = reward; // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥—ã –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
                showLevelUpModal(); // –ü–æ–∫–∞–∑ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            }
            updateUI(); // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            saveGame(); // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
        }

        function showLevelUpModal() {
            const modal = document.getElementById('levelModal');
            modal.style.display = "block";
        }

        function closeModal() {
            const modal = document.getElementById('levelModal');
            modal.style.display = "none";
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.innerText = message;
            notification.style.display = 'block';
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        setInterval(() => {
            if (neuroClicks > 0) {
                energy += neuroClicks;
                updateUI();
                saveGame();
                checkProgress();
            }
        }, 1000);

        loadGame();
    </script>
</body>
</html>
