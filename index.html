<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–ª–∏–∫–µ—Ä –ò–≥—Ä–∞</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #1e1e2f;
            color: #fff;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        .nav {
            display: flex;
            gap: 15px; /* –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –º–µ–∂–¥—É —Å—Å—ã–ª–∫–∞–º–∏ */
            margin-bottom: 20px;
        }

        .nav a {
            background: #4a4a7a; /* –¢–µ–º–Ω—ã–π —Ñ–æ–Ω –¥–ª—è —Å—Å—ã–ª–æ–∫ */
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-size: 18px; 
            transition: background 0.3s ease, transform 0.2s;
        }

        .nav a:hover {
            background: #6a6a9a; /* –°–≤–µ—Ç–ª–µ–µ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
            transform: translateY(-2px); /* –≠—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü */
        .container {
            max-width: 500px;
            width: 100%;
            text-align: center;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #5a5a95;
            border-radius: 12px;
            background: #2c2c4f; /* –û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç —Ñ–æ–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
        }

        h1, h2 {
            margin: 10px 0;
            text-shadow: 0 0 10px #ffffff;
        }

        /* –°—Ç–∏–ª—å –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∫–ª–∏–∫–∞ */
        #clickButton {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            background: linear-gradient(145deg, #5e5e98, #4a4a7a);
            border: none;
            color: #fff;
            font-size: 26px;
            cursor: pointer;
            margin: 20px auto;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
            transition: transform 0.1s, box-shadow 0.3s;
            position: relative;
        }

        #clickButton:hover {
            transform: scale(1.05); /* –≠—Ñ—Ñ–µ–∫—Ç –Ω–∞–≤–µ–¥–µ–Ω–∏—è –¥–ª—è –∫–Ω–æ–ø–∫–∏ */
        }

        #clickButton:active {
            transform: scale(0.95);
            box-shadow: none;
        }

        /* –°—Ç–∏–ª—å –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ */
        .score-container,
        .stats-list {
            margin: 15px 0;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #5a5a95;
        }

        /* –°—Ç–∏–ª—å –¥–ª—è —É–ª—É—á—à–µ–Ω–∏–π */
        .upgrade {
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #5a5a95;
            border-radius: 10px;
            background: rgba(50, 50, 50, 0.8);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .upgrade:hover {
            transform: scale(1.02);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
        }

        .upgrade button {
            background: linear-gradient(45deg, #5e5e98, #4a4a7a);
            border: none;
            color: white;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .upgrade button:disabled {
            background: rgba(85, 85, 85, 0.9);
            color: #ccc; /* –¶–≤–µ—Ç –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–∏ */
            cursor: not-allowed;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞ */
        .floating-text {
            position: absolute;
            animation: floatUp 1s ease-out forwards;
            font-size: 24px;
            pointer-events: none;
            color: #FFD700; /* –¶–≤–µ—Ç –¥–ª—è —Ç–µ–∫—Å—Ç–∞ —Å –Ω–∞–≥—Ä–∞–¥–æ–π */
        }

        .critical-text {
            color: var(--critical-red);
            font-size: 32px;
            animation: criticalFloat 1.5s ease-out forwards;
        }

        @keyframes floatUp {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-100px) scale(0.5); opacity: 0; }
        }

        @keyframes criticalFloat {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            50% { transform: translateY(-50px) scale(1.5); opacity: 1; }
            100% { transform: translateY(-100px) scale(0.5); opacity: 0; }
    </style>
</head>
<body>
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="nav">
        <a href="#" onclick="showPage('main')">üè†</a>
        <a href="#" onclick="showPage('upgrades')">‚öôÔ∏è</a>
        <a href="#" onclick="showPage('referral')">üîó</a>
        <a href="#" onclick="showPage('stats')">üìä</a>
    </div>

    <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
    <div id="main" class="page active">
        <div class="container">
            <h1>–ö–ª–∏–∫–µ—Ä –ò–≥—Ä–∞</h1>
            <div id="score" class="score-container">0</div>
            <button id="clickButton">–ö–ª–∏–∫!</button>
            <div id="clickPower">–°–∏–ª–∞ –∫–ª–∏–∫–∞: 1</div>
            <div id="autoClickers">–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä—ã: 0</div>
        </div>
    </div>

    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–£–ª—É—á—à–µ–Ω–∏—è" -->
    <div id="upgrades" class="page">
        <div class="container">
            <h2>–£–ª—É—á—à–µ–Ω–∏—è</h2>
            <div id="upgradesList" class="shop"></div>
        </div>
    </div>

    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞" -->
    <div id="referral" class="page">
        <div class="container">
            <h2>–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</h2>
            <div class="referral-container">
                <input type="text" id="referralCode" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥">
                <button id="applyReferral">–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫–æ–¥</button>
                <div id="referralMessage"></div>
                <h3>–í–∞—à —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥: <span id="userReferralCode">REF-${generateReferralCode()}</span></h3>
            </div>
        </div>
    </div>

    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞" -->
    <div id="stats" class="page">
        <div class="container">
            <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
            <div class="stats-list">
                <p id="totalCoins">–°–æ–±—Ä–∞–Ω–æ –º–æ–Ω–µ—Ç: 0</p>
                <p id="totalUpgrades">–í—Å–µ–≥–æ —É–ª—É—á—à–µ–Ω–∏–π: 0</p>
                <p id="invitedPeople">–ü—Ä–∏–≥–ª–∞—à—ë–Ω–Ω—ã—Ö –ª—é–¥–µ–π: 0</p>
            </div>
            <button id="resetStats">–°–±—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É</button>
        </div>
    </div>

    <script>
        let score = 0;
        let baseClickPower = 1;
        let autoClickers = 0;
        let multipliers = { critical: 1, timeBoost: 1, goldenClick: 1 };
        let totalUpgrades = 0; // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–ª—É—á—à–µ–Ω–∏–π
        let invitedPeople = 0; // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–≥–ª–∞—à—ë–Ω–Ω—ã—Ö –ª—é–¥–µ–π
        const referralBonus = 100; // –ë–æ–Ω—É—Å –∑–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥
        const userReferralCode = `REF-${generateReferralCode()}`; // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥

        const upgrades = [
            { name: '–£—Å–∏–ª–µ–Ω–Ω—ã–π –∫–ª–∏–∫', price: 50, power: 1, type: 'click', owned: 0, max: 20 },
            { name: '–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä', price: 100, power: 1, type: 'auto', owned: 0, max: 50 },
            { name: '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É–¥–∞—Ä (10%)', price: 500, power: 0.1, type: 'critical', owned: 0, max: 5 },
            { name: '–ó–æ–ª–æ—Ç–æ–π –∫–ª–∏–∫', price: 1000, power: 5, type: 'golden', owned: 0, max: 1 },
            { name: '–£—Å–∫–æ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏', price: 2000, power: 2, type: 'boost', duration: 30, owned: 0, max: 3 },
            { name: '–ú–Ω–æ–∂–∏—Ç–µ–ª—å x2', price: 5000, power: 2, type: 'multiplier', owned: 0, max: 1 },
            { name: '–¶–µ–ø–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è', price: 10000, power: 0.5, type: 'chain', owned: 0, max: 5 }
        ];

        function generateReferralCode() {
            return Math.random().toString(36).substring(2, 10).toUpperCase(); // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∫–æ–¥–∞
        }

        function calculateTotalClickPower() {
            let total = baseClickPower;
            total += upgrades.filter(u => u.type === 'click').reduce((sum, u) => sum + (u.power * u.owned), 0);
            const multiplier = upgrades.filter(u => u.type === 'multiplier').reduce((sum, u) => sum * (u.power ** u.owned), 1);
            const criticalMultiplier = 1 + upgrades.filter(u => u.type === 'critical').reduce((sum, u) => sum + (u.power * u.owned), 0);
            const chainMultiplier = 1 + upgrades.filter(u => u.type === 'chain').reduce((sum, u) => sum + (u.power * u.owned), 0);
            return total * multiplier * chainMultiplier * criticalMultiplier * multipliers.timeBoost * multipliers.goldenClick;
        }

        function buyUpgrade(index) {
            const upgrade = upgrades[index];
            if (score >= upgrade.price && upgrade.owned < upgrade.max) {
                score -= upgrade.price;
                upgrade.owned++;
                totalUpgrades++; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–ª—É—á—à–µ–Ω–∏–π
                upgrade.price = Math.floor(upgrade.price * 1.5);
                saveGame();
                updateUI();
                return true;
            }
            return false;
        }

        document.getElementById('clickButton').addEventListener('click', (e) => {
            let clickValue = calculateTotalClickPower();
            const criticalChance = upgrades.filter(u => u.type === 'critical').reduce((sum, u) => sum + (u.power * u.owned), 0);
            if (Math.random() < criticalChance) {
                clickValue *= 2;
                showCriticalEffect(e);
            }
            score += clickValue;
            updateUI();
            saveGame();
            showClickEffect(e, clickValue);
        });

        function showClickEffect(event, value) {
            const effect = document.createElement('div');
            effect.className = 'floating-text';
            effect.textContent = `+${Math.floor(value)}`;
            effect.style.left = `${event.clientX}px`;
            effect.style.top = `${event.clientY}px`;
            document.body.appendChild(effect);
            setTimeout(() => effect.remove(), 1000);
        }

        function showCriticalEffect(event) {
            const effect = document.createElement('div');
            effect.className = 'floating-text critical-text';
            effect.textContent = 'CRITICAL!';
            effect.style.left = `${event.clientX}px`;
            effect.style.top = `${event.clientY}px`;
            document.body.appendChild(effect);
            setTimeout(() => effect.remove(), 1500);
        }

        function saveGame() {
            const data = {
                score,
                baseClickPower,
                autoClickers,
                multipliers,
                upgrades: upgrades.map(upgrade => ({
                    owned: upgrade.owned,
                    price: upgrade.price
                })),
                totalUpgrades,
                invitedPeople
            };
            localStorage.setItem('clickerSave', JSON.stringify(data));
        }

        function loadGame() {
            const saved = localStorage.getItem('clickerSave');
            if (saved) {
                const data = JSON.parse(saved);
                score = data.score || 0;
                baseClickPower = data.baseClickPower || 1;
                autoClickers = data.autoClickers || 0;
                multipliers = data.multipliers || { critical: 1, timeBoost: 1, goldenClick: 1 };
                totalUpgrades = data.totalUpgrades || 0;
                invitedPeople = data.invitedPeople || 0;
                upgrades.forEach((upgrade, index) => {
                    if (data.upgrades && data.upgrades[index]) {
                        upgrade.owned = data.upgrades[index].owned || 0;
                        upgrade.price = data.upgrades[index].price || upgrade.price;
                    }
                });
            }
            updateUI();
        }

        function updateUI() {
            document.getElementById('score').textContent = Math.floor(score);
            document.getElementById('clickPower').textContent = `–°–∏–ª–∞ –∫–ª–∏–∫–∞: ${calculateTotalClickPower()}`;
            document.getElementById('autoClickers').textContent = `–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä—ã: ${autoClickers}`;
            
            const upgradesDiv = document.getElementById('upgradesList');
            upgradesDiv.innerHTML = upgrades.map((upgrade, index) => `
                <div class="upgrade">
                    <div>
                        <h3>${upgrade.name}</h3>
                        <p>${getUpgradeDescription(upgrade)}</p>
                        <p>–¶–µ–Ω–∞: ${Math.floor(upgrade.price)}</p>
                        <p>–ö—É–ø–ª–µ–Ω–æ: ${upgrade.owned}/${upgrade.max}</p>
                    </div>
                    <button onclick="buyUpgrade(${index})" ${score < upgrade.price || upgrade.owned >= upgrade.max ? 'disabled' : ''}>
                        –ö—É–ø–∏—Ç—å
                    </button>
                </div>
            `).join('');

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
            document.getElementById('totalCoins').textContent = `–°–æ–±—Ä–∞–Ω–æ –º–æ–Ω–µ—Ç: ${score}`;
            document.getElementById('totalUpgrades').textContent = `–í—Å–µ–≥–æ —É–ª—É—á—à–µ–Ω–∏–π: ${totalUpgrades}`;
            document.getElementById('invitedPeople').textContent = `–ü—Ä–∏–≥–ª–∞—à—ë–Ω–Ω—ã—Ö –ª—é–¥–µ–π: ${invitedPeople}`;

            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞
            document.getElementById('userReferralCode').textContent = userReferralCode;
        }

        function getUpgradeDescription(upgrade) {
            switch (upgrade.type) {
                case 'critical': return `–®–∞–Ω—Å: +${upgrade.power * 100}%`;
                case 'golden': return `–ú–Ω–æ–∂–∏—Ç–µ–ª—å: x${upgrade.power}`;
                case 'boost': return `–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ${upgrade.duration}—Å`;
                default: return `–°–∏–ª–∞: +${upgrade.power}`;
            }
        }

        function showPage(pageId) {
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');

            if (pageId === 'upgrades') {
                updateUI();
            } else if (pageId === 'referral') {
                document.getElementById('referralMessage').textContent = '';
            }
        }

        document.getElementById('applyReferral').addEventListener('click', () => {
            const referralCode = document.getElementById('referralCode').value.trim();
            if (referralCode === 'REF123') { // –ü—Ä–∏–º–µ—Ä —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞
                score += referralBonus;
                invitedPeople++;
                saveGame();
                document.getElementById('referralMessage').textContent = `–í—ã –ø–æ–ª—É—á–∏–ª–∏ ${referralBonus} –æ—á–∫–æ–≤ –∑–∞ –≤–≤–µ–¥–µ–Ω–∏–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞!`;
            } else {
                document.getElementById('referralMessage').textContent = '–ù–µ–≤–µ—Ä–Ω—ã–π —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥!';
            }
        });

        function resetStats() {
            totalUpgrades = 0;
            invitedPeople = 0;
            score = 0; // –°–±—Ä–æ—Å–∏—Ç—å —Ç–∞–∫–∂–µ —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –º–æ–Ω–µ—Ç—ã
            saveGame();
            updateUI();
            alert('–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—á–∏—â–µ–Ω–∞.');
        }

        document.getElementById('resetStats').addEventListener('click', resetStats);

        function init() {
            loadGame();
            updateUI();
            showPage('main');
        }

        init();
    </script>
</body>
</html>